<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Pod::Advent 0.21 (Pod::Simple 3.07, Perl::Tidy 20090616) on 2010-12-12 22:45:35 -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>2010 Perl Advent Calendar: karp bo&#x17c;onarodzenie OR Dear Santa, Please REPL</title>
<link rel="stylesheet" href="../style.css" type="text/css" />
<link rel="alternate" type="text/plain" href="mod11.pod" />
</head>
<body>
<h1><a href="../">Perl Advent Calendar 2010-12</a>-10+any(1,0)</h1>
<h2 align="center">karp bo&#x17c;onarodzenie OR Dear Santa, Please REPL</h2>
<h3 align="center">by Jerrad Pierce</h3>
<p>As you might imagine, Santa has a lot of large, long-running scripts which develop the occasional Heisenbug. As a result conventional debuggers can be a bit of a bear to work with. Fortunately there's <tt><a href="http://search.cpan.org/perldoc?Carp::REPL" title="Carp::REPL">Carp::REPL</a></tt> which drops the program into a read-eval-print loop once it starts bucking for a stocking full of virtual coal; some of the scripts up north are sufficiently magical to be sentient.</p>
<pre><span class="c">% perl -MCarp::REPL naughty.pl
Died at naughty.pl line 1225.

Trace begun at naughty.pl line 1225
$ <span style="text-decoration: blink">&#x258b;</span></span></pre>
<p>While <tt><span title="Carp::REPL">Carp::REPL</span></tt>'s not a proper debugger, you do get a number of specialized commands for manipulating the stack or listing lexicals and lines of code. On top of that, you have the full power of Perl at your disposal. So, if you happen to load the core module <tt><a href="http://search.cpan.org/perldoc?Dumpvalue" title="Dumpvalue">Dumpvalue</a></tt> you can get an expansive view of the script's environment e.g;</p>
<pre><span class="c">$ use Dumpvalue; #or load via -M
$ Dumpvalue-&gt;new(globPrint =&gt; 1)-&gt;dumpValue(\*::);
-&gt; *main::main::
      %{*main::main::} = (
         &quot;\cA&quot; =&gt; *main::
               ${*main::^A} = &#39;&#39;
         &quot;\cD&quot; =&gt; *main::
               ${*main::^D} = 0
         &quot;\cENCODING&quot; =&gt; *main::NCODING
         &quot;\cH&quot; =&gt; *main::
               ${*main::^H} = 256
         &quot;\cI&quot; =&gt; *main::
         &quot;\cL&quot; =&gt; *main::
...
         &#39;File::&#39; =&gt; *main::File::
               %{*main::File::} = (
                  &#39;Basename::&#39; =&gt; *File::Basename::
                        %{*File::Basename::} = (
                           &#39;BEGIN&#39; =&gt; *File::Basename::BEGIN
                           &#39;EXPORT&#39; =&gt; *File::Basename::EXPORT
                                 @{*File::Basename::EXPORT} = (

                                    0  &#39;fileparse&#39;
                                    1  &#39;fileparse_set_fstype&#39;
                                    2  &#39;basename&#39;
                                    3  &#39;dirname&#39;
                                 )
...
         &#39;STDERR&#39; =&gt; *main::STDERR
               FileHandle({*main::STDERR}) =&gt; fileno(2)
         &#39;STDIN&#39; =&gt; *main::STDIN
               FileHandle({*main::STDIN}) =&gt; fileno(0)
         &#39;STDOUT&#39; =&gt; *main::STDOUT
               FileHandle({*main::STDOUT}) =&gt; fileno(1)
...
         &#39;|&#39; =&gt; *main::|
               ${*main::|} = 0
         &#39;~&#39; =&gt; *main::~
               ${*main::~} = &#39;STDOUT&#39;</span></pre>
<p>Setting <span style="font-style: italic">globPrint</span> allows <tt><span title="Dumpvalue">Dumpvalue</span></tt> to act like <tt>Data::Dumper</tt> on steroids, and recurse into namespaces specified by the supplied glob. If you do dump a glob, you might want to restrict the output to a particular namespace, or ensure you have a large scrollback buffer. The standard Perl environment, plus dependencies of <tt><span title="Carp::REPL">Carp::REPL</span></tt> result in 24_465 lines/1.6Mb of output.</p>
<p><tt><span title="Dumpvalue">Dumpvalue</span></tt> has other super powers of course, like the ability to specify which variables you'd like dumped by <tt><span class="w">dumpvars</span></tt> with regular expressions.</p>
<div style="float: right; font-size: 10pt"><a href="mod11.pod">View Source (POD)</a></div><br />
</body>
</html>
